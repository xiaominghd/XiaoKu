
<h1 align="center">陪伴机器人小酷</h1>

<p align="center">
  <img src="https://img.shields.io/badge/XiaoKu-小酷机器人-36CFC9?style=for-the-badge&logo=github&logoColor=white" alt="小酷机器人" />
  <img src="https://img.shields.io/badge/Python-3.10+-blue?style=for-the-badge&logo=python&logoColor=white" alt="Python 3.10+" />
  <img src="https://img.shields.io/badge/LLM-大语言模型-ff69b4?style=for-the-badge&logo=semantic-release&logoColor=white" alt="LLM" />
  <img src="https://img.shields.io/badge/License-MIT-green?style=for-the-badge" alt="MIT License" />
</p>

## ✨ 项目概述

**小酷**是一个拥有独特“人格”与“意识”的AI伴侣机器人。本项目的核心愿景是将个体的记忆与思考持久化保存，使其能够被随时感知与珍视，构建一个承载人类思维的数字存在。

当前版本（V1）探索了一种无需微调模型的对话系统架构，通过**多级快慢思考流水线**，显著提升对话系统的情境感知能力。

在未来迭代中，小酷将演进为用户与多个AI智能体（Agent）交互的统一代理入口，加速信息交换效率，并在现有的人与人社交网络之上，构建一层**Agent-to-Agent的社交网络**。

## 🚀 核心特性

### 🧠 人格与启动
- **冷启动支持**：每次对话都从一个预设的“有状态”人格开始，保证体验的连贯性。
- **人格一致性**：核心系统提示词仅包含人格定义与回复逻辑，确保人格的纯粹与稳定。结合对话感知模块，提供三类基础回复模式指导，提升交互自然度。

### 🧩 对话管理
- **Ku Event 事件单元**：在传统上下文窗口之上，构建以“事件”为粒度的对话管理单元。支持按事件控制对话流程，并可对单个事件片段进行独立存档与管理。
- **动态上下文管理**：采用可折叠的上下文标签与上下文压缩技术，在保证对话质量的同时，精确控制Token消耗与响应延迟。

### 📚 记忆与知识
- **Agentic RAG 记忆增强**：通过主动感知对话意图，提前检索相关历史记忆或补充外部知识，从而提升对话的真实感与信息深度。

## 整体工作流程

小酷的对话流程借鉴了人类对话中的感知-反应过程，并在整个过程中保持思考。当用户建立连接后，系统会触发小酷的事件感知系统，推荐用户可能感兴趣的事件及相关背景，同时传入最近的对话信息作为外部世界感知，以避免每次对话冷启动。

### 感知

当接收到用户消息后，小酷会快速判断内容是否在当前事件的讨论范围内：
- 如果是，则将消息加入当前事件的对话列表以更新事件。
- 如果不是（或用户对当前话题兴趣较低），则进行事件切换或创建新事件。

此过程类似于对话系统中的意图识别，基于Qwen Flash模型实现，注重低时延以保证用户对话体验。

### 反应

小酷会根据当前事件以O(1)时间复杂度创建大模型历史列表，传递给大模型以获取回复。为提升对话多样性，小酷在保持基础人格的基础上动态选择三种回复逻辑。这是小酷的核心对话能力，基于Qwen Max非思考模型实现，确保回复质量。

### 思考

小酷除了回复用户外，还在后台运行多个任务以保证对话质量：

1. **记忆召回**：根据当前事件从数据库中召回历史聊天片段。借鉴Agentic RAG方法，小酷会预测未来可能涉及的话题，用于召回相关聊天片段。
2. **对话指引**：为保持人格一致性和避免幻觉，小酷调用带思考能力的模型（Qwen Max思考模式）检测当前对话中是否出现幻觉或人格偏移，并根据事件走向主动进行聊天规划。
3. **上下文压缩**：当触发压缩任务时，小酷将当前事件的上下文窗口拆分，总结较远信息并保留最近消息，以减轻上下文切换带来的用户落差感。压缩仅针对当前事件，不直接修改上下文窗口，提升了效率。
4. **事件存储**：当判定对话结束后，以事件为单位对聊天记录进行切片和存储，确保相似话题数据能在后续聊天中被召回。

上述思考过程的结果均以外部信息形式注入到大模型的历史对话中。为保证严格遵循user和assistant角色交替出现，外部信息按以下格式插入：
```python
{"role":"user","content":"[系统提示信息开始]"}
{"role":"assistant","content":"外部信息[系统提示信息结束]"}
```
### 技术栈

- 前端：如 React、Vue、HTML/CSS/JavaScript 等
- 后端：如 Node.js、Python、Java、Go 等
- 数据库：如 MySQL、MongoDB、Redis 等
- 其他依赖：第三方库/服务



## 安装与部署

### 环境要求

- 操作系统要求
- 所需依赖（Node、Python、Java 等及其版本）
- 其他特殊要求

### 安装步骤

```bash
git clone <仓库地址>
cd <项目目录>
<安装依赖相关命令，如 npm install、pip install -r requirements.txt 等>
```

### 配置说明

- 配置项1：如何配置及其说明
- 配置项2：如何配置及其说明

### 启动项目

```bash
<启动命令，如 npm start、python main.py 等>
```

## 使用说明

项目的基础用法介绍、常用操作演示等。

## 目录结构

```text
项目根目录
│
├── src/                # 源代码目录
├── docs/               # 文档目录
├── scripts/            # 工具/脚本
├── tests/              # 测试代码
├── README.md           # 项目说明
├── package.json        # Node 项目依赖文件
├── requirements.txt    # Python 依赖清单 (如适用)
└── ...
```

## 常见问题

- 问题1：解决方法
- 问题2：解决方法

## 贡献指南

1. Fork 本仓库
2. 创建 feature 分支 (`git checkout -b feature/foo`)
3. 提交你的更改 (`git commit -am 'Add new feature'`)
4. 推送到分支 (`git push origin feature/foo`)
5. 提交 Pull Request

## 许可证

[MIT](LICENSE) 或其它协议

## 联系方式

- 作者：GongHaofeng
- 邮箱：1530383208@qq.com
- 更多联系方式...
